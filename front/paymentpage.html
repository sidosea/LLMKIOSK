<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ê²°ì œí•˜ê¸°</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/Detail.css">
</head>
<body>

<!-- ìƒë‹¨ë°” -->
<nav class="navbar navbar-light bg-light">
  <div class="container">
    <a class="navbar-brand" href="#">ğŸ’³ ê²°ì œí•˜ê¸°</a>
  </div>
</nav>

<!-- ê²°ì œ ë³¸ë¬¸ -->
<div class="container py-5">
  <h2 class="mb-4">ì£¼ë¬¸ ë‚´ì—­</h2>

  <ul class="list-group mb-4" id="order-summary">
    <!-- JSë¡œ ì¥ë°”êµ¬ë‹ˆ ëª©ë¡ ì¶œë ¥ -->
  </ul>

  <h4 class="text-end my-4" id="total-price">ì´ì•¡: â‚©0</h4>

  <div class="d-grid gap-3">
    <button class="btn btn-primary btn-lg" id="card-payment">ğŸ’³ ì¼ë°˜ ì¹´ë“œ ê²°ì œ</button>
    <button class="btn btn-success btn-lg" id="easy-payment">ğŸ“± ë„¤ì´ë²„í˜ì´ / ì¹´ì¹´ì˜¤í˜ì´</button>
    <button class="btn btn-warning btn-lg" id="cash-payment">ğŸ’µ í˜„ê¸ˆ ê²°ì œ</button>
  </div>
</div>

<!-- ë¶€íŠ¸ìŠ¤íŠ¸ë© ë° ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- ì¥ë°”êµ¬ë‹ˆ ë°ì´í„°ë¥¼ ì½ê³  í™”ë©´ì— ì¶œë ¥í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // URLì—ì„œ cart íŒŒë¼ë¯¸í„° ê°€ì ¸ì˜¤ê¸°
    const urlParams = new URLSearchParams(window.location.search);
    const cartParam = urlParams.get('cart');

    if (!cartParam) {
      document.getElementById('order-summary').innerHTML = '<li class="list-group-item">ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤.</li>';
      return;
    }

    // cart ë°ì´í„° ë””ì½”ë”© ë° íŒŒì‹±
    const cart = JSON.parse(decodeURIComponent(cartParam));

    const orderSummary = document.getElementById('order-summary');
    let totalPrice = 0;

    // ì¥ë°”êµ¬ë‹ˆ í•­ëª©ì„ ë¦¬ìŠ¤íŠ¸ë¡œ ì¶”ê°€
    for (const [name, item] of Object.entries(cart)) {
      const itemTotal = item.price * item.quantity;
      totalPrice += itemTotal;

      const listItem = document.createElement('li');
      listItem.className = 'list-group-item d-flex justify-content-between align-items-center';
      listItem.innerHTML = `
        <div>
          <strong>${name}</strong> (${item.quantity}ê°œ)
        </div>
        <div>â‚©${itemTotal.toLocaleString()}</div>
      `;
      orderSummary.appendChild(listItem);
    }

    // ì´ì•¡ ì—…ë°ì´íŠ¸
    document.getElementById('total-price').textContent = `ì´ì•¡: â‚©${totalPrice.toLocaleString()}`;
  });
</script>

<script src="payment_script.js"></script>
</body>
</html>
